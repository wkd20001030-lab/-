一. 项目简介
本项目利用Python构建了一个跨期均值回归策略来研究上证50股指期货不同交割月份之间的价差关系.通过统计分析来判断价差的偏离与回归,当价差偏离时进场,回归时平仓,从而达到稳定的收益.

二. 核心思路
  将所有合约按照相邻月份两两配对,例如IH2201–IH2202,并利用P_{near} - P_{far}来计算出两份合约每分钟收盘价的价差(spread). 利用价差减去滚动均值再除以标准差得到标准化偏离(Z-score),改数据反映了当前价差相对于历史水平的偏离程度.
  把Z-score当作交易信号:
  
| Z ≥ +2 | 做空价差（卖近买远） | 价差偏高 |
| Z ≤ −2 | 做多价差（买近卖远） | 价差偏低 |
| |Z| ≤ 0.5 | 平仓 | 回归均值 |

持仓状态用 ‘pos’ 表示：
  - +1 → 做多价差  
  - −1 → 做空价差  
  - 0 → 空仓

  最后,根据每分钟的价差变化来计算PnL,并在最后得出每一个配对以及投资组合每一年的各项回测结果.

三. 数据生成
  首先将数据库中的每一项合约的数据提取成独立文档,之后将每一个文档按照合约的时间顺序排列并进行两两配对,计算每一对的价差,z-sore,持仓方向并生成新的文档.通过价差计算PnL_t = pos_{t-1}*(spread_t - spread_{t-1})*300,并在最后得出每个配对以及投资组合的年化收益率、夏普比率、波动率、收益回撤比. 

四. 结果输出
  以下是最终得出的结果:
  2022  年化收益 8.66% | 年化波动 0.60% | 夏普比例 14.54 | 最大回撤 -0.07% | 收益回撤比 128.58 | 天数 242
  2023  年化收益 2.72% | 年化波动 0.26% | 夏普比例 10.43 | 最大回撤 -0.10% | 收益回撤比 27.77 | 天数 242
  2024  年化收益 4.71% | 年化波动 0.79% | 夏普比例 5.93 | 最大回撤 -0.11% | 收益回撤比 41.18 | 天数 242
  2025  年化收益 6.47% | 年化波动 0.60% | 夏普比例 10.77 | 最大回撤 -0.02% | 收益回撤比 262.01 | 天数 164
  
  可以看出,改策略的整体表现较为平稳且风险较低,同时由于价差波动较小,夏普比率较高.最大回撤接近0,表示几乎没有明显亏损的阶段. 

五. 后续研究
  1. 数据层面
     - 扩展数据样本(沪深300,中证500,国债期货,商品期货等),验证改策略在不同市场下的普适性及稳定性
     - 运用更多特征变量(持仓量差,隐含收益率,波动率结构,流动性指标等)
  2. 策略层面
     - 使用机器学习或深度学习方法,在多变量和非线形波动的条件下优化策略
     - 根据市场状态波动调整交易逻辑,优化风险管理
     - 运用波动率调整头寸,保证预期风险的一致性

